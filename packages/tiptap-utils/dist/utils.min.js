
    /*!
    * tiptap-utils v1.10.4
    * (c) 2020 überdosis GbR (limited liability)
    * @license MIT
    */


/*!
    * tiptap-utils v1.10.4
    * (c) 2020 überdosis GbR (limited liability)
    * @license MIT
    */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("prosemirror-utils")):"function"==typeof define&&define.amd?define(["exports","prosemirror-utils"],t):t((e=e||self).tiptapUtils={},e.prosemirrorUtils)}(this,(function(e,t){"use strict";function n({types:e,node:t}){return Array.isArray(e)&&e.includes(t.type)||t.type===e}function r(e,n,r){const o=Object.keys(r),i=t.findSelectedNodeOfType(n)(e)||t.findParentNode(e=>e.type===n)(e);if(!o.length||!i)return!!i;if(!["paragraph","heading","blockquote","list_item","table_cell","table_header"].includes(n.name))return i.node.hasMarkup(n,{...i.node.attrs,...r});const s=Object.entries(i.node.attrs).filter(([e])=>o.includes(e));return s.length&&s.every(([e,t])=>r[e]===t)}e.getMarkAttrs=function(e,t){const{from:n,to:r}=e.selection;let o=[];e.doc.nodesBetween(n,r,e=>{o=[...o,...e.marks]});const i=o.find(e=>e.type.name===t.name);return i?i.attrs:{}},e.getMarkRange=function(e=null,t=null){if(!e||!t)return!1;const n=e.parent.childAfter(e.parentOffset);if(!n.node)return!1;const r=n.node.marks.find(e=>e.type===t);if(!r)return!1;let o=e.index(),i=e.start()+n.offset,s=o+1,a=i+n.node.nodeSize;for(;o>0&&r.isInSet(e.parent.child(o-1).marks);)o-=1,i-=e.parent.child(o).nodeSize;for(;s<e.parent.childCount&&r.isInSet(e.parent.child(s).marks);)a+=e.parent.child(s).nodeSize,s+=1;return{from:i,to:a}},e.getNodeAttrs=function(e,t,r){let o=r?{...r}:null;if("align"in t.attrs){const{schema:{nodes:{paragraph:t,heading:i}},selection:{from:s,to:a}}=e;let l=null;e.doc.nodesBetween(s,a,e=>!l&&(!n({node:e,types:[t,i]})||(l=e.attrs.align||null,!1))),l&&(o=r?{...r,align:l}:null)}return o},e.markIsActive=function(e,t){const{from:n,$from:r,to:o,empty:i}=e.selection;return i?!!t.isInSet(e.storedMarks||r.marks()):!!e.doc.rangeHasMark(n,o,t)},e.nodeEqualsType=n,e.nodeIsActive=function({schema:e,selection:t},n,o={}){if("alignment"!==n.name)return r(t,n,o);const{paragraph:i,heading:s,blockquote:a,list_item:l,table_cell:d,table_header:c}=e.nodes;return[i,s,a,l,d,c].some(e=>r(t,e,o))},Object.defineProperty(e,"__esModule",{value:!0})}));